# =======================================================================
# API Deployment Demo - Environment Configuration
# =======================================================================
# This file documents all environment variables used in the application.
# Copy this file to .env and update the values for your environment.

# =======================================================================
# DATABASE CONFIGURATION
# =======================================================================
# PostgreSQL database settings
DB_NAME=api_staging
DB_USER=postgres
DB_PASSWORD=your_secure_database_password_here
DB_HOST=postgres
DB_PORT=5432
DB_HOST_AUTH_METHOD=md5

# Full database URL (alternative to individual settings above)
# DATABASE_URL=postgresql://postgres:password@postgres:5432/api_staging

# =======================================================================
# API APPLICATION SETTINGS  
# =======================================================================
# Application environment (development, staging, production)
API_ENV=staging

# Enable/disable debug mode (true/false)
DEBUG=false

# Secret key for cryptographic operations (CHANGE THIS IN PRODUCTION!)
SECRET_KEY=your-very-secure-secret-key-change-this-in-production

# Number of Gunicorn worker processes
API_WORKERS=4

# Logging level (debug, info, warning, error, critical)
LOG_LEVEL=info

# API server port
API_PORT=8000

# =======================================================================
# WEB SERVER CONFIGURATION
# =======================================================================
# Server name/hostname
SERVER_NAME=localhost

# HTTP and HTTPS ports
HTTP_PORT=80
HTTPS_PORT=443

# Upstream API server for Nginx reverse proxy
API_UPSTREAM=api:8000

# =======================================================================
# SSL/TLS CONFIGURATION
# =======================================================================
# Enable SSL/HTTPS (true/false)
SSL_ENABLED=false

# Generate self-signed certificates (true/false)
SSL_SELF_SIGNED=true

# SSL certificate configuration for self-signed certificates
SSL_COUNTRY=US
SSL_STATE=California
SSL_CITY=San Francisco
SSL_ORGANIZATION=API Demo Company
SSL_ORGANIZATIONAL_UNIT=IT Department
SSL_EMAIL=admin@example.com

# Certificate validity period in days
SSL_DAYS_VALID=365

# RSA key size for SSL certificate
SSL_KEY_SIZE=2048

# =======================================================================
# DOCKER COMPOSE SETTINGS
# =======================================================================
# Docker Compose project name
COMPOSE_PROJECT_NAME=api-deployment-demo

# Docker Compose HTTP timeout (seconds)
COMPOSE_HTTP_TIMEOUT=120

# =======================================================================
# RESOURCE LIMITS (for Docker/Kubernetes)
# =======================================================================
# API container resource limits
API_MEMORY_LIMIT=512M
API_CPU_LIMIT=0.5
API_MEMORY_REQUEST=256M
API_CPU_REQUEST=0.25

# Nginx container resource limits  
NGINX_MEMORY_LIMIT=128M
NGINX_CPU_LIMIT=0.25

# Database container resource limits
DB_MEMORY_LIMIT=512M
DB_CPU_LIMIT=0.5

# =======================================================================
# MONITORING AND ALERTING
# =======================================================================
# Enable monitoring features (true/false)
MONITORING_ENABLED=true

# Log retention period in days
LOG_RETENTION_DAYS=30

# Health check configuration
HEALTH_CHECK_RETRIES=5
HEALTH_CHECK_DELAY=10
HEALTH_CHECK_TIMEOUT=30

# Alert email for notifications
ALERT_EMAIL=ops@yourcompany.com

# Slack webhook URL for alerts (optional)
MONITORING_SLACK_WEBHOOK=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# =======================================================================
# BACKUP CONFIGURATION
# =======================================================================
# Enable automatic backups (true/false)
BACKUP_ENABLED=true

# Backup retention period in days
BACKUP_RETENTION_DAYS=7

# Backup schedule (cron format)
BACKUP_SCHEDULE=0 2 * * *

# =======================================================================
# NETWORK AND SECURITY
# =======================================================================
# Firewall configuration (comma-separated ports)
ALLOWED_PORTS=80,443,22

# CORS settings
CORS_ALLOW_ORIGINS=*
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_HEADERS=Origin,X-Requested-With,Content-Type,Accept,Authorization

# Rate limiting (requests per minute)
RATE_LIMIT_PER_MINUTE=60

# =======================================================================
# DEVELOPMENT/TESTING SETTINGS
# =======================================================================
# Build environment (development, staging, production)
BUILD_ENV=staging

# Enable development features (true/false)
DEV_MODE=false

# Test database settings (used for running tests)
TEST_DB_NAME=api_test
TEST_DB_USER=test_user
TEST_DB_PASSWORD=test_password

# =======================================================================
# EXTERNAL SERVICES (optional)
# =======================================================================
# Redis cache URL (if using caching)
# REDIS_URL=redis://localhost:6379/0

# Email service configuration (for notifications)
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=noreply@yourcompany.com
# SMTP_PASSWORD=your_smtp_password
# SMTP_USE_TLS=true

# Object storage (AWS S3, MinIO, etc.)
# S3_BUCKET=your-app-bucket
# S3_ACCESS_KEY=your_access_key
# S3_SECRET_KEY=your_secret_key
# S3_ENDPOINT=https://s3.amazonaws.com
# S3_REGION=us-west-2

# =======================================================================
# KUBERNETES-SPECIFIC SETTINGS
# =======================================================================
# Kubernetes namespace
K8S_NAMESPACE=api-deployment-demo

# Ingress configuration
INGRESS_CLASS=nginx
INGRESS_HOST=api-demo.staging.local

# Horizontal Pod Autoscaler settings
HPA_MIN_REPLICAS=2
HPA_MAX_REPLICAS=10
HPA_CPU_TARGET=70
HPA_MEMORY_TARGET=80

# =======================================================================
# ANSIBLE DEPLOYMENT SETTINGS
# =======================================================================
# Target deployment environment
TARGET_ENV=staging

# Application version/tag to deploy
APP_VERSION=latest

# Deployment user
DEPLOY_USER=deploy

# Application directory on target server
APP_DIR=/opt/api-deployment-demo

# =======================================================================
# EXAMPLE VALUES FOR DIFFERENT ENVIRONMENTS
# =======================================================================

# DEVELOPMENT ENVIRONMENT:
# API_ENV=development
# DEBUG=true
# LOG_LEVEL=debug
# SSL_ENABLED=false
# MONITORING_ENABLED=false

# STAGING ENVIRONMENT:
# API_ENV=staging  
# DEBUG=false
# LOG_LEVEL=info
# SSL_ENABLED=true
# SSL_SELF_SIGNED=true
# MONITORING_ENABLED=true

# PRODUCTION ENVIRONMENT:
# API_ENV=production
# DEBUG=false
# LOG_LEVEL=warning
# SSL_ENABLED=true
# SSL_SELF_SIGNED=false
# MONITORING_ENABLED=true
# BACKUP_ENABLED=true

# =======================================================================
# NOTES
# =======================================================================
# 1. Always change default passwords and secret keys before deployment
# 2. Use strong, unique passwords for production environments
# 3. Consider using external secret management systems for production
# 4. Regularly rotate secrets and certificates
# 5. Monitor logs and set up appropriate alerting
# 6. Test backup and restore procedures regularly
# 7. Keep this file updated when adding new configuration options